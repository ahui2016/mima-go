# Todos

- 测试 MimaDB.Add

## Write to file

- The `Fprintln` function takes a `io.writer` as parameter and appends a new line.

## Secretbox

- 在 json_test.go 里对加密进行试验.
- 测试多条加密数据的文件读写（换行符的处理）

## 数据库操作符号

- 在 Mima 中增加一个数据库操作符号
  (不需要, 利用 UpdatedAt 来表示)

## 唯一性检查

- Nonce?
- 由于数据量少, 就用遍历检查.
- 以后数据量大, 可以增加一个 map 来提高寻找唯一主键的效率.

## 自增 ID

- 前端与后端之间相互沟通, 需要指定每一条记录的 ID
- Nonce 是二进制数据, 转换为 base64 也很长, 不适合用来做 ID
- 因此采用自增 ID (uint)

## 数据库碎片

- 本软件不采用真正的数据库, 而是使用普通文件来保存信息.
- 每次新增, 修改, 或删除一条记录时, 都生成一个新文件, 称为 "数据库碎片".
- 每次启动软件, 初始化时, 读取这些数据库碎片, 整合到一个单独的文件中.
- 所谓整合, 分两种情况:
  - 如果有修改或删除, 则重写整个文件
  - 如果只有新增, 则直接在文件后 append
- 但鉴于本软件预估数据量很小, 因此不管任何情况都重写整个文件
